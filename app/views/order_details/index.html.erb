<p></p>
<table class="table">
  <thead class="thead-light">
    <tr>
      <th scope="col">Name</th>
      <th scope="col">Item</th>
      <th scope="col">Amount</th>
      <th scope="col">Price</th>
      <th scope="col">Comment</th>
    </tr>
  </thead>
  <tbody>
  <% @details.each do |detail| %>
    <tr>
    <td><%= User.find(detail.user_id).name%></td>
      <td><%= detail.item_name%></td>
      <td><%= detail.amount%></td>
      <td><%= detail.price%></td>
      <td>
      <%= detail.comment%>
      <% if current_user.id == detail.user_id && @order.status == 0%>
      <%= link_to 'delete' ,detail, method: :delete  %>
      <%end %>
      
      </td>
    </tr>
  <%end%>
  </tbody>
</table>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
  <%= @order.joined%> friends joined,click to view
</button>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">joined users</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container">
                <% @invited_users.each do |user| %>
                <% if user.status == 1 %>
                <h1><%= User.find(user.user_id).name  %></h1>
                <%# <%= link_to 'remove', order_detail_url , method: :delete ,:params => {:id => detail.id} %> %>
                <%end %>
                <%end %>
            </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


<div class="container">
  <h2>Add Order </h2>
  <%= form_for(@newDetail,:url => {:controller => "order_details", :action => "create"}) do |f| %>
  <div class="form-inline">
    <div class="form-group">
      <label for="item">Item:</label>
      <input type="text" class="form-control" id="email" placeholder="Enter Item" name="item">
    </div>
    
    <div class="form-group">
      <label for="amount">Amount:</label>
      <input type="number" id="quantity" name="amount" min="1">
    </div>
    <div class="form-group">
      <label for="price">Price:</label>
      <input type="number" id="quantity" name="price" min="1">
    </div>
    <div class="form-group">
      <label for="comment">Comment:</label>
      <input type="text" class="form-control" id="pwd" placeholder="Enter Comment" name="comment">
    </div>
     <input type="hidden" name="order_id" value = <%= @order.id%> >
    <button type="submit" class="btn btn-success">Add</button>
  </div>
  <% end %>
</div>

